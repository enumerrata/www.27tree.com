<?xml version="1.0" encoding="UTF-8"?>
<root>
  <uid>2</uid>
  <datetime>2012-12-04 22:25:00</datetime>
  <title><![CDATA[arp攻击解决办法]]></title>
  <content><![CDATA[<p>
	如果你发现经常网络掉线，或者发现自己的网站所有页面都被挂马，但到服务器上，查看页面源代码，却找不到挂马代码，就要考虑到是否自己机器或者同一IP段中其他机器是否中了ARP病毒。除了装ARP防火墙以外，还可以通过绑定网关的IP和MAC来预防一下。这个方法在局域网中比较适用：
</p>
<p>
	你所在的局域网里面有一台机器中了ARP病毒，它伪装成网关，你上网就会通过那台中毒的机器，然后它过一会儿掉一次线来骗取别的机器的帐户密码什么的东西。
</p>
<p>
	下面是手动处理方法的简要说明：
</p>
<p>
	如何检查和处理“ ARP 欺骗”木马的方法
</p>
<p>
	1．检查本机的“ ARP 欺骗”木马染毒进程
</p>
<p>
	同时按住键盘上的“ CTRL ”和“ ALT ”键再按“ DEL ”键，选择“任务管理器”，点选“进程”标签。察看其中是否有一个名为“ MIR0.dat ”的进程。如果有，则说明已经中毒。右键点击此进程后选择“结束进程”。
</p>
<p>
	2．检查网内感染“ ARP 欺骗”木马染毒的计算机
</p>
<p>
	在“开始” - “程序” - “附件”菜单下调出“命令提示符”。输入并执行以下命令：
</p>
<p>
	ipconfig
</p>
<p>
	记录网关 IP 地址，即“ Default Gateway ”对应的值，例如“ 59.66.36.1 ”。再输入并执行以下命令：
</p>
<p>
	arp –a
</p>
<p>
	在“ Internet Address ”下找到上步记录的网关 IP 地址，记录其对应的物理地址，即“ Physical Address ”值，例如“ 00-01-e8-1f-35-54 ”。在网络正常时这就是网关的正确物理地址，在网络受“ ARP 欺骗”木马影响而不正常时，它就是木马所在计算机的网卡物理地址。
</p>
<p>
	也可以扫描本子网内的全部 IP 地址，然后再查 ARP 表。如果有一个 IP 对应的物理地址与网关的相同，那么这个 IP 地址和物理地址就是中毒计算机的 IP 地址和网卡物理地址。
</p>
<p>
	3．设置 ARP 表避免“ ARP 欺骗”木马影响的方法
</p>
<p>
	本方法可在一定程度上减轻中木马的其它计算机对本机的影响。用上边介绍的方法确定正确的网关 IP 地址和网关物理地址，然后在 “命令提示符”窗口中输入并执行以下命令：
</p>
<p>
	arp –s 网关 IP 网关物理地址
</p>
<p>
	4. 静态ARP绑定网关
</p>
<p>
	步骤一：
</p>
<p>
	在能正常上网时，进入MS-DOS窗口，输入命令：arp －a，查看网关的IP对应的正确MAC地址， 并将其记录下来。
</p>
<p>
	注意：如果已经不能上网，则先运行一次命令arp －d将arp缓存中的内容删空，计算机可暂时恢复上网（攻击如果不停止的话）。一旦能上网就立即将网络断掉（禁用网卡或拔掉网线），再运行arp －a。
</p>
<p>
	步骤二：
</p>
<p>
	如果计算机已经有网关的正确MAC地址，在不能上网只需手工将网关IP和正确的MAC地址绑定，即可确保计算机不再被欺骗攻击。
</p>
<p>
	要想手工绑定，可在MS-DOS窗口下运行以下命令：
</p>
<p>
	arp －s 网关IP 网关MAC
</p>
<p>
	例如：假设计算机所处网段的网关为192.168.1.1，本机地址为192.168.1.5，在计算机上运行arp －a后输出如下：
</p>
<p>
	Cocuments and Settings&gt;arp -a
</p>
<p>
	Interface:192.168.1.5 --- 0x2
</p>
<p>
	Internet Address Physical Address Type
</p>
<p>
	192.168.1.1 00-01-02-03-04-05 dynamic
</p>
<p>
	其中，00-01-02-03-04-05就是网关192.168.1.1对应的MAC地址，类型是动态（dynamic）的，因此是可被改变的。
</p>
<p>
	被攻击后，再用该命令查看，就会发现该MAC已经被替换成攻击机器的MAC。如果希望能找出攻击机器，彻底根除攻击，可以在此时将该MAC记录下来，为以后查找该攻击的机器做准备。
</p>
<p>
	手工绑定的命令为：
</p>
<p>
	arp －s 192.168.1.1 00-01-02-03-04-05
</p>
<p>
	绑定完，可再用arp －a查看arp缓存：
</p>
<p>
	Cocuments and Settings&gt;arp -a
</p>
<p>
	Interface: 192.168.1.5 --- 0x2
</p>
<p>
	Internet Address Physical Address Type
</p>
<p>
	192.168.1.1 00-01-02-03-04-05 static
</p>
<p>
	这时，类型变为静态（static），就不会再受攻击影响了。
</p>
<p>
	但是，需要说明的是，手工绑定在计算机关机重启后就会失效，需要再次重新绑定，不过也可以写个批处理，拖到启动中。脚本如下：
</p>
<p>
	@echo off
</p>
<p>
	arp -s192.168.1.1 00-01-02-03-04-05
</p>
<p>
	end
</p>
<p>
	保存为*.bat的文件。放在开机启动中。
</p>
<p>
	要彻底根除攻击，只有找出网段内被病毒感染的计算机，把病毒杀掉，才算是真正解决问题。
</p>]]></content>
  <parseVersion>1.1</parseVersion>
  <state>0</state>
</root>
